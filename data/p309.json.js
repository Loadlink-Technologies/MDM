window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p309","name":"usp_MilageUpdateLToP","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"LoadMatching@UDVLPLL4DATASRV.linklogi.com","id":"d9"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"usp_MilageUpdateLToP"},{"field":"Type","value":"Procedure"}],"script":"/* ============================== OTHERS ============================== */\r\n\r\n/*\r\n\tLLSIM-1758: Web - The load distance between P to L shows big difference \r\n*/\r\n\r\n--------------------------------------------------------------------------\r\n-- PROCEDURE NAME : [usp_MilageUpdateLToP]\r\n--------------------------------------------------------------------------\r\n-- DESCRIPTION    : The existing records will be updated with the PCMillerMiles values in Legacy \r\n--\t\t\t\t\tNew records that exits in Legacy and not matching Platform will be inserted in Mileage table\r\n--\r\n-- CALLED BY      : \r\n-- EXECUTION FREQUENCY : \r\n-- \r\n-- INPUT PARAMS   : \r\n--                 \r\n-- OUTPUT PARAMS  :\r\n-- STATUS RETURN  : \r\n--------------------------------------------------------------------------\r\n-- =============================================\r\n-- HISTORY :\r\n-- AUTHOR    DATE       DESCRIPTION\r\n-- Nesrin   2019.03.08\tInitial Development\r\n--\t\t\t\t\t\tLLSIM-1758: Web - The load distance between P to L shows big difference \r\n-- =============================================\r\nCREATE PROCEDURE [dbo].[usp_MilageUpdateLToP]\r\nAs\r\n\tBEGIN Transaction [UpdateTrans]\r\n\tBEGIN Try\r\n\t-- Insert the missing values from L to P\r\n\t\tinsert into Mileage (SrceID,DestID,PCMilerMiles,calcStatus)  \r\n\t\t\tselect SrceID,DestID,miles,2 from production.production.dbo.Mileage Lm \r\n\t\t\t\t\t where not exists( select * from  Mileage PM \r\n\t\t\t\t\t\t\twhere Lm.SrceID = PM.SrceID and LM.DestID = PM.DestID)\r\n\r\n\t\tCOMMIT transaction [UpdateTrans]\r\n\tEND TRY\r\n\tBEGIN CATCH\r\n\t\tROLLBACK TRANSACTION [UpdateTrans]\r\n\tEND CATCH  \r\n \r\nGRANT EXECUTE ON  [dbo].[usp_MilageUpdateLToP] TO [udb_platform]","parameters":[],"dependencies":null,"imported_at":"2021-07-29 12:59"};