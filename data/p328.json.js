window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p328","name":"usp_UpdateUserLegacyDeleted","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"LoadMatching@UDVLPLL4DATASRV.linklogi.com","id":"d9"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"usp_UpdateUserLegacyDeleted"},{"field":"Type","value":"Procedure"}],"script":"--==========================================================================================\r\n\r\n--- Create New Stored procedure 1\r\nCREATE PROCEDURE [dbo].[usp_UpdateUserLegacyDeleted]\r\n    @CustCD\t\tVARCHAR(10),\r\n\t@LeadType\tCHAR\r\n\r\n-----------------------------------------------------------------------\r\n-- PROCEDURE NAME : usp_UpdateUserLegacyDeleted\r\n--------------------------------------------------------------------------\r\n-- DESCRIPTION    : Updates the flag for Legacy deleted tokens\r\n--\r\n-- INPUT PARAMS   : @UserId\t\t- Logged in User's CustCd\r\n--\t\t\t\t\t@LeadType\t- 'L' = Load Leads, 'E' = Equipment Leads\r\n--\t\t\t\t\t\t\t\t, 'B' = Both Load and Equipment Leads\r\n--------------------------------------------------------------------------\r\n-- HISTORY :\r\n-- AUTHOR\t\tDATE\t\t\tDESCRIPTION\r\n-- Vevian\t\t2019.05.17\t\tLLSIM-2697: Initial Development\r\n---------------------------------------------------------------------------\r\n\r\nAS\r\n\r\n-- Create Temp table to hold user's deleted Legacy Leads\r\nDECLARE @DeletedLegacyLeads AS TABLE ([TokenID] INT, [Token] INT, [LLDeleted] BIT, [CreatedDate] DATETIME);\r\n\r\n-- Get User's deleted Legacy Leads and populate Temp table\r\nINSERT INTO @DeletedLegacyLeads\r\nEXEC [usp_GetUserLegacyDeleted] @CustCD, @LeadType;\r\n\t\t\r\n-- Update the flag of user's deleted Legacy Leads\r\nUPDATE LegacyDeleted SET LLDeleted = 1\r\nWHERE Token in (SELECT Token FROM @DeletedLegacyLeads)","parameters":[{"name":"CustCD","description":null,"mode":"IN","data_type":"varchar(10)","custom_fields":{}},{"name":"LeadType","description":null,"mode":"IN","data_type":"char(1)","custom_fields":{}}],"dependencies":null,"imported_at":"2021-07-29 12:59"};