window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p196","name":"usp_ArchiveLinkPostings","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"LoadMatching@UDVLPLL4DATASRV.linklogi.com","id":"d9"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"usp_ArchiveLinkPostings"},{"field":"Type","value":"Procedure"}],"script":"-- ===========================================================================================\r\n\r\nCREATE PROCEDURE [dbo].[usp_ArchiveLinkPostings]\r\nAS\r\n-- =============================================\r\n-- Sergey\t25 Sep 2018\t\tInitial Development\r\n-- Vevian\t29 Aug 2019\t\tLLSIM-3267: Daily Archive job to populate the new \"InitialLeadsCount\" field\r\n-- =============================================\r\n\r\nBEGIN\r\n\r\n\t--1. Archive LoadPosting and EquipmentPosting that were created today using CreatedOn column\r\n\tDECLARE @StartDate DATE, @EndDate DATE\r\n\tSELECT @EndDate = CAST(GETDATE() AS DATE), @StartDate = DATEADD(day,-1,CAST(GETDATE() AS DATE))\r\n\r\n\tSET NOCOUNT ON;\r\n\r\n\tINSERT INTO LoadPosting_Arch ([Token],[CustCD],[DateAvail],[SrceID],[SrceCity],[SrceSt],[SrceCountry],[SrceLong],[SrceLat],[SrceRadius],[DestID],[DestCity]\r\n\t\t,[DestSt],[DestCountry],[DestLong],[DestLat],[DestRadius],[VSize],[VType],[Comment],[PostMode],[ClientRefNum],[ProductName],[PAttrib],[Distance],[CreatedOn]\r\n\t\t,[CreatedBy],[DeletedOn],[DeletedBy],[PStatus],[NetworkId],[UpdatedOn],[UpdatedBy],[OriginalToken],[InitialLeadsCount])\r\n\tSELECT [Token],[CustCD],[DateAvail],[SrceID],[SrceCity],[SrceSt],[SrceCountry],[SrceLong],[SrceLat],[SrceRadius],[DestID],[DestCity]\r\n\t\t,[DestSt],[DestCountry],[DestLong],[DestLat],[DestRadius],[VSize],[VType],[Comment],[PostMode],[ClientRefNum],[ProductName],[PAttrib],[Distance],[CreatedOn]\r\n\t\t,[CreatedBy],[DeletedOn],[DeletedBy],[PStatus],[NetworkId],[UpdatedOn],[UpdatedBy],[OriginalToken],[InitialLeadsCount]\r\n\tFROM LoadPosting\r\n\tWHERE CreatedOn >= @StartDate AND CreatedOn < @EndDate\r\n\r\n\tINSERT INTO EquipmentPosting_Arch ([Token],[CustCD],[DateAvail],[SrceID],[SrceCity],[SrceSt],[SrceCountry],[SrceLong],[SrceLat],[SrceRadius],[DestID],[DestCity]\r\n\t\t,[DestSt],[DestCountry],[DestLong],[DestLat],[DestRadius],[VSize],[VType],[Comment],[PostMode],[ClientRefNum],[ProductName],[Route],[PAttrib],[Distance],\r\n\t\t[CreatedOn],[CreatedBy],[DeletedOn],[DeletedBy],[PStatus],[NetworkId],[UpdatedOn],[UpdatedBy],[Corridor],[OriginalToken],[InitialLeadsCount])\r\n\tSELECT [Token],[CustCD],[DateAvail],[SrceID],[SrceCity],[SrceSt],[SrceCountry],[SrceLong],[SrceLat],[SrceRadius],[DestID],[DestCity],\r\n\t\t[DestSt],[DestCountry],[DestLong],[DestLat],[DestRadius],[VSize],[VType],[Comment],[PostMode],[ClientRefNum],[ProductName],[Route],[PAttrib],[Distance],\r\n\t\t[CreatedOn],[CreatedBy],[DeletedOn],[DeletedBy],[PStatus],[NetworkId],[UpdatedOn],[UpdatedBy],[Corridor],[OriginalToken],[InitialLeadsCount]\r\n\tFROM EquipmentPosting\r\n\tWHERE CreatedOn >= @StartDate AND CreatedOn < @EndDate\r\n\r\nEND","parameters":[],"dependencies":null,"imported_at":"2021-07-29 12:59"};