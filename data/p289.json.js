window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p289","name":"usp_GetRIRate","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"LoadMatching@UDVLPLL4DATASRV.linklogi.com","id":"d9"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"usp_GetRIRate"},{"field":"Type","value":"Procedure"}],"script":"CREATE PROCEDURE [dbo].[usp_GetRIRate]\r\n    @VType    INT ,\r\n    @SrceSt   VARCHAR(2) ,\r\n    @SrceCity VARCHAR(50) ,\r\n    @DestSt   VARCHAR(2) ,\r\n    @DestCity VARCHAR(50)\r\nAS\r\nBEGIN\r\n\r\n--------------------------------------------------------------------------\r\n-- PROCEDURE NAME : usp_GetRIRate\r\n--------------------------------------------------------------------------\r\n-- DESCRIPTION    : Get Rate Index info\r\n--\r\n-- CALLED BY      : LoadMatching Web API \r\n-- \r\n-- INPUT PARAMS   : @VType    = Vehicle Type Code\r\n--                  @SrceSt   - Source State/Province Code\r\n--                  @SrceCity - Source City\r\n--                  @DestSt   - Destination State/Province Code\r\n--                  @DestCity - Destination City\r\n--------------------------------------------------------------------------\r\n-- HISTORY : \r\n-- AUTHOR\t\tDATE\t\tDESCRIPTION\r\n-- Vevian\t\t2018.10.03\tInitial Development\r\n-- Vevian\t\t2018.10.12\tchange RIRate to Rate \r\n--------------------------------------------------------------------------\r\n\r\nDECLARE \r\n    @SrceMarketAreaId   INT = 0 ,\r\n    @DestMarketAreaId   INT = 0 ,\r\n\r\n    @RIVType            INT = -1, \r\n    @RIRate             NUMERIC(18,2) = -1, \r\n    @RIExtra            VARCHAR(MAX) = '' \r\n\r\n-- Retrieve Source Market Area\r\nEXEC dbo.usp_GetValidLocation\r\n\t@City         = @SrceCity OUTPUT,\r\n\t@StateCode    = @SrceSt OUTPUT,\r\n    @MarketAreaId = @SrceMarketAreaId OUTPUT\r\n\r\n-- Retrieve Destination Market Area\r\nEXEC dbo.usp_GetValidLocation\r\n\t@City         = @DestCity OUTPUT,\r\n\t@StateCode    = @DestSt OUTPUT,\r\n    @MarketAreaId = @DestMarketAreaId OUTPUT\r\n\r\nIF (@SrceMarketAreaId > 0 AND @DestMarketAreaId > 0)\r\n    BEGIN\r\n\t\tSELECT\r\n\t\t\t@RIVType = dbo.udf_ConvertLLVtypeToRIVtype(@VType) ,\r\n\t\t\t@RIRate  = R.Rate ,\r\n\t\t\t@RIExtra = R.Extra \r\n        FROM dbo.RIRate R  \r\n        WHERE R.SrceMarketAreaID = @SrceMarketAreaId \r\n\t\t\tAND R.DestMarketAreaID = @DestMarketAreaId \r\n\t\t\tAND dbo.udf_ConvertLLVtypeToRIVtype(@VType) = R.RIVType \r\n    END\r\n\r\nSELECT\r\n    ISNULL(dbo.udf_RIVTypeToString(@RIVType),'') RIVType,\r\n    ISNULL(@RIRate,-1) Rate,\r\n    ISNULL(@RIExtra,'') RIExtra\r\n\r\nEND","parameters":[{"name":"VType","description":null,"mode":"IN","data_type":"int","custom_fields":{}},{"name":"SrceSt","description":null,"mode":"IN","data_type":"varchar(2)","custom_fields":{}},{"name":"SrceCity","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"DestSt","description":null,"mode":"IN","data_type":"varchar(2)","custom_fields":{}},{"name":"DestCity","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}}],"dependencies":null,"imported_at":"2021-07-29 12:59"};