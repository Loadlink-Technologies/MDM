window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p213","name":"usp_CreateFlag","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"LoadMatching@UDVLPLL4DATASRV.linklogi.com","id":"d9"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"usp_CreateFlag"},{"field":"Type","value":"Procedure"}],"script":"CREATE PROCEDURE [dbo].[usp_CreateFlag]\r\n    @CustCD         VARCHAR(10) \r\n   ,@ContactCustCD  VARCHAR(10) \r\n   ,@LToken         INT \r\n   ,@EToken         INT \r\n   ,@LSrcCity       VARCHAR(50) = ''\r\n   ,@LSrcSt         VARCHAR(2)  = ''\r\n   ,@LDestCity      VARCHAR(50) = ''\r\n   ,@LDestSt        VARCHAR(2)  = ''\r\n   ,@LVType         VARCHAR(50) = ''\r\n   ,@LVSize         VARCHAR(50) = ''\r\n   ,@LPostedDate    DATETIME2(7)= ''\r\n   ,@LPAttrib       VARCHAR(20) = ''\r\n   ,@LComment       VARCHAR(4096) = ''\r\n   ,@PSrcCity       VARCHAR(50) = ''\r\n   ,@PSrcSt         VARCHAR(2)  = ''\r\n   ,@PDestCity      VARCHAR(50) = ''\r\n   ,@PDestSt        VARCHAR(2)  = ''\r\n   ,@PVType         VARCHAR(50) = ''\r\n   ,@PVSize         VARCHAR(50) = ''\r\n   ,@PPostedDate    DATETIME2(7)= '' \r\n   ,@PPAttrib       VARCHAR(50) = ''\r\n   ,@PComment       VARCHAR(4096) = ''\r\n   ,@PostType       CHAR(1) = 'L' \r\n   ,@CreatedBy      INT         = 0\r\nAS\r\nBEGIN\r\n\r\n--------------------------------------------------------------------------\r\n-- PROCEDURE NAME : usp_CreateFlag\r\n--------------------------------------------------------------------------\r\n-- DESCRIPTION    : Create Flag record\r\n--\r\n-- CALLED BY      : LoadMatching Web API \r\n-- EXECUTION FREQUENCY : \r\n-- \r\n-- INPUT PARAMS   : @CustCD        : CustCd of Tag Creator\r\n--                  @ContactCustCD : CustCd of Customer been Tag\r\n--                  @LToken        : Load Token\r\n--                  @EToken        : Equipment Token\r\n--                  @LSrcCity      : Lead Source City\r\n--                  @LSrcSt        : Lead Source State\r\n--                  @LDestCity     : Lead Destination City\r\n--                  @LDestSt       : Lead Destination State\r\n--                  @LVType        : Lead Vehicle Type\r\n--                  @LVSize        : Lead Vehicle Size\r\n--                  @LPostedDate   : Lead Posted Date\r\n--                  @LPAttrib      : Lead Posting Attribute\r\n--                  @LComment      : Lead Comment\r\n--                  @PSrcCity      : Posting Source City\r\n--                  @PSrcSt        : Posting Source State\r\n--                  @PDestCity     : Posting Destination City\r\n--                  @PDestSt       : Posting Destination State\r\n--                  @PVType        : Posting Vehicle Type\r\n--                  @PVSize        : Posting Vehicle Size\r\n--                  @PPostedDate   : Posting Posted Date\r\n--                  @PPAttrib      : Posting Posting Attribute\r\n--                  @PComment      : Posting Comment\r\n--                  @PostType      : L=Load, E=Equipment\r\n--                  @CreatedBy     : User creating the Tag        \r\n-- OUTPUT PARAMS  :\r\n-- STATUS RETURN  : \r\n--------------------------------------------------------------------------\r\n-- HISTORY : \r\n-- AUTHOR    DATE       DESCRIPTION\r\n-- Hiro      2018.08.08 Initial Development\r\n-- Kruti\t 2019.01.25 LLSIM-2168: If record exsits return the Id of duplicate record.\r\n--------------------------------------------------------------------------\r\n\r\nDECLARE \r\n    @Error          INT = 0\r\n   ,@RowCount       INT = 0 \r\n   ,@Id\t\t        INT = 0\r\n   ,@LeadToken      INT = 0\r\n   ,@PostingToken   INT = 0\r\n\r\n   \t-- Check if Record already exsits \t\r\n\tSELECT \r\n\t@Id = f.Id \r\n\tFROM dbo.Flag f\r\n\tWHERE f.CustCd = @CustCd\r\n\tAND f.ContactCustCd = @ContactCustCd\r\n\tAND f.LToken = @LToken\r\n\tAND f.EToken = @EToken\r\n\r\n\tIF (@Id = 0 )\r\n\t\tBEGIN TRY\r\n\t\t\tINSERT INTO dbo.Flag \r\n\t\t\t(   \r\n\t\t\t\tCustCD       \r\n\t\t\t\t,ContactCustCD\r\n\t\t\t\t,LToken       \r\n\t\t\t\t,EToken       \r\n\t\t\t\t,LSrcCity     \r\n\t\t\t\t,LSrcSt       \r\n\t\t\t\t,LDestCity    \r\n\t\t\t\t,LDestSt      \r\n\t\t\t\t,LVType       \r\n\t\t\t\t,LVSize       \r\n\t\t\t\t,LPostedDate  \r\n\t\t\t\t,LPAttrib     \r\n\t\t\t\t,LComment     \r\n\t\t\t\t,PSrcCity     \r\n\t\t\t\t,PSrcSt       \r\n\t\t\t\t,PDestCity    \r\n\t\t\t\t,PDestSt      \r\n\t\t\t\t,PVType       \r\n\t\t\t\t,PVSize       \r\n\t\t\t\t,PPostedDate  \r\n\t\t\t\t,PPAttrib     \r\n\t\t\t\t,PComment     \r\n\t\t\t\t,PostType     \r\n\t\t\t\t,CreatedBy \r\n\t\t\t\t,CreatedOn   \r\n\t\t\t)\r\n\t\t\tVALUES        \r\n\t\t\t(\r\n\t\t\t\t @CustCD       \r\n\t\t\t\t,@ContactCustCD\r\n\t\t\t\t,@LToken       \r\n\t\t\t\t,@EToken       \r\n\t\t\t\t,@LSrcCity     \r\n\t\t\t\t,@LSrcSt       \r\n\t\t\t\t,@LDestCity    \r\n\t\t\t\t,@LDestSt      \r\n\t\t\t\t,@LVType       \r\n\t\t\t\t,@LVSize       \r\n\t\t\t\t,@LPostedDate  \r\n\t\t\t\t,@LPAttrib     \r\n\t\t\t\t,@LComment     \r\n\t\t\t\t,@PSrcCity     \r\n\t\t\t\t,@PSrcSt       \r\n\t\t\t\t,@PDestCity    \r\n\t\t\t\t,@PDestSt      \r\n\t\t\t\t,@PVType       \r\n\t\t\t\t,@PVSize       \r\n\t\t\t\t,@PPostedDate  \r\n\t\t\t\t,@PPAttrib     \r\n\t\t\t\t,@PComment     \r\n\t\t\t\t,@PostType\r\n\t\t\t\t,@CreatedBy \r\n\t\t\t\t,GETUTCDATE()   \r\n\t\t\t)\r\n\t\tSET @Id = SCOPE_IDENTITY()\r\n\t\tEND TRY\r\n\t\tBEGIN CATCH\r\n\t\t\tSET @Id = -1\r\n\t\tEND CATCH\r\n\r\n\tSELECT @Id   Id\r\n\r\n\tRETURN @Id\r\n\r\nEND","parameters":[{"name":"CustCD","description":null,"mode":"IN","data_type":"varchar(10)","custom_fields":{}},{"name":"ContactCustCD","description":null,"mode":"IN","data_type":"varchar(10)","custom_fields":{}},{"name":"LToken","description":null,"mode":"IN","data_type":"int","custom_fields":{}},{"name":"EToken","description":null,"mode":"IN","data_type":"int","custom_fields":{}},{"name":"LSrcCity","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"LSrcSt","description":null,"mode":"IN","data_type":"varchar(2)","custom_fields":{}},{"name":"LDestCity","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"LDestSt","description":null,"mode":"IN","data_type":"varchar(2)","custom_fields":{}},{"name":"LVType","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"LVSize","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"LPostedDate","description":null,"mode":"IN","data_type":"datetime2(7)","custom_fields":{}},{"name":"LPAttrib","description":null,"mode":"IN","data_type":"varchar(20)","custom_fields":{}},{"name":"LComment","description":null,"mode":"IN","data_type":"varchar(4096)","custom_fields":{}},{"name":"PSrcCity","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"PSrcSt","description":null,"mode":"IN","data_type":"varchar(2)","custom_fields":{}},{"name":"PDestCity","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"PDestSt","description":null,"mode":"IN","data_type":"varchar(2)","custom_fields":{}},{"name":"PVType","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"PVSize","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"PPostedDate","description":null,"mode":"IN","data_type":"datetime2(7)","custom_fields":{}},{"name":"PPAttrib","description":null,"mode":"IN","data_type":"varchar(50)","custom_fields":{}},{"name":"PComment","description":null,"mode":"IN","data_type":"varchar(4096)","custom_fields":{}},{"name":"PostType","description":null,"mode":"IN","data_type":"char(1)","custom_fields":{}},{"name":"CreatedBy","description":null,"mode":"IN","data_type":"int","custom_fields":{}}],"dependencies":null,"imported_at":"2021-07-29 12:59"};