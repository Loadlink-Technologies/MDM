window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p252","name":"usp_GetDATRegionCode","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"LoadMatching@UDVLPLL4DATASRV.linklogi.com","id":"d9"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"usp_GetDATRegionCode"},{"field":"Type","value":"Procedure"}],"script":"CREATE PROCEDURE [dbo].[usp_GetDATRegionCode]\r\n    @Region         VARCHAR(300) \r\n  , @TotalUsRegion  BIGINT OUTPUT \r\n  , @TotalCDNRegion BIGINT OUTPUT \r\n\r\n-------------------------------------------------------------------------\r\n-- PROCEDURE NAME : usp_GetDATRegionCode\r\n-------------------------------------------------------------------------\r\n-- DESCRIPTION    : Get a Combined Region Code from passed State list\r\n--\r\n-- ASSUMPTIONS    : \r\n-- CALLED BY      : DATRx QServer\r\n-- EXECUTION FREQUENCY :called for each region load or truck posting (tens of thousands).\r\n--\r\n-- INPUT PARAMS   : @Region     -  Bar (|) delimited string contains State and Zone list\r\n--                  Example Region='|CT|CO|'\r\n--                                ='|Z0|Z1|Z2|Z3|Z4|Z5|Z6|'\r\n--                                ='|Z1|DC|MD|NJ|'\r\n-- OUTPUT PARAMS  :\r\n-- STATUS RETURN  : \r\n--------------------------------------------------------------------------\r\n-- HISTORY :\r\n-- AUTHOR    DATE       DESCRIPTION\r\n-- Hiro      2018.08.27 Initial Development\r\n--------------------------------------------------------------------------\r\nAS\r\nSET NOCOUNT ON\r\n\r\n    -- Convert the Province/State to updated code.\r\n    SET @Region = REPLACE(REPLACE(REPLACE(@Region, 'PQ','QC'),'NF','NL'),'YK','YT') \r\n\r\n    SELECT @TotalUsRegion = SUM(r.Region_Bitvalue)  \r\n    FROM dbo.RegionList r\r\n    WHERE CHARINDEX(r.StateCode,@Region,1) > 0\r\n    AND r.Country = 1 -- US\r\n\r\n    SELECT @TotalCDNRegion = SUM(r.Region_Bitvalue)  \r\n    FROM dbo.RegionList r\r\n    WHERE CHARINDEX(r.StateCode,@Region,1) > 0\r\n    AND r.Country = 2 -- Canada\r\n\r\n    -- Set the output parameter to be used by Other stored procedure\r\n    -- Note: If no matching is found then return 0. \r\n    SELECT @TotalUsRegion  = ISNULL(@TotalUsRegion,0)  \r\n          ,@TotalCDNRegion = ISNULL(@TotalCDNRegion,0)","parameters":[{"name":"Region","description":null,"mode":"IN","data_type":"varchar(300)","custom_fields":{}},{"name":"TotalUsRegion","description":null,"mode":"INOUT","data_type":"bigint","custom_fields":{}},{"name":"TotalCDNRegion","description":null,"mode":"INOUT","data_type":"bigint","custom_fields":{}}],"dependencies":null,"imported_at":"2021-07-29 12:59"};